aws cloudformation create-stack \
  --stack-name my-vpc-stack \
  --template-body file://vpc-ec2.yaml \
  --parameters ParameterKey=KeyNameParameter,ParameterValue=MyKeyPair \
  --capabilities CAPABILITY_IAM


aws cloudformation create-stack \
  --stack-name eks-nlb-stack \
  --template-body file://eks-nlb.yaml \
  --capabilities CAPABILITY_IAM \
  --parameters \
    ParameterKey=ClusterName,ParameterValue=myeks \
    ParameterKey=VpcId,ParameterValue=vpc-1234567890abcdef \
    ParameterKey=SubnetIds,ParameterValue='subnet-aaa,subnet-bbb,subnet-ccc'

aws cloudformation create-stack \
  --stack-name eks-nlb-stack \
  --template-body file://eks-nlb.yaml \
  --capabilities CAPABILITY_IAM \
  --parameters file://params.json


aws cloudformation create-stack \
  --stack-name MyEKSWithNLBStack \
  --template-body file://eks-nlb-stack.yaml \
  --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM \
  --parameters ParameterKey=KeyName,ParameterValue=your-ec2-keypair


aws cloudformation create-stack \
  --stack-name MyEKSWithNLBStack \
  --template-body file://eks-nlb-stack.yaml \
  --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM \
  --parameters \
      ParameterKey=KeyName,ParameterValue=your-keypair \
      ParameterKey=VpcId,ParameterValue=vpc-1234567890abcdef \
      ParameterKey=SubnetIds,ParameterValue='subnet-aaaa1111,subnet-bbbb2222'

aws cloudformation create-stack \
  --stack-name baxmos-nlg-eks-stack \
  --template-body file://eks-nlb-v3.yaml \
  --parameters file://parameters.json \
  --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM


aws cloudformation wait stack-create-complete --stack-name MyEKSWithNLBStack

eks config:
aws eks update-kubeconfig --name MyEKSCluster


Deploy Nginx Ingress Controllers with Helm to NodePorts:

# HTTP Ingress
helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
helm install nginx-http ingress-nginx/ingress-nginx --set controller.service.type=NodePort --set controller.service.nodePorts.http=30080

# TCP/Stream Ingress
helm repo add nginx-stable https://helm.nginx.com/stable
helm install nginx-stream nginx-stable/nginx-ingress --set controller.service.type=NodePort --set controller.service.nodePorts.tcp=30443


curl -fsSL https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash


kubectl apply -f nginx-http-controller.yaml
kubectl apply -f nginx-tcp-controller.yaml

aws cloudformation create-stack \
  --stack-name baxmos-nlg-eks-stack \
  --template-body file://eks-nlb-v4.yaml \
  --parameters file://parameters.json \
  --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM